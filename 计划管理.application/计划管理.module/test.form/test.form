<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<form id="__11e9-7a26-62f4b1ff-9820-539e9af1e136">
  <name>test</name>
  <parentId>11e9-7a26-62f43cbe-9820-539e9af1e136</parentId>
  <description></description>
  <templatecontext><![CDATA[<p abp="24657">
<table class="form_table" cellspacing="1" cellpadding="1" width="100%" align="center" border="0" abp="24658">
    <caption abp="24659">厂级计划表</caption>
    <tbody abp="24660">
        <tr abp="24661">
            <td class="td_label" width="120" abp="24662">计划编号</td>
            <td abp="24663"><input id="11e3-0efa-e4ed81b6-a0a4-df64d61cdd0b" class="cn.myapps.runtime.dynaform.form.ejb.InputField" value="" name="_pNo" abp="24664" fieldtype="VALUE_TYPE_VARCHAR" filtercondition="" discript="计划编号" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.InputField" text="readonly" fieldkeyevent="Tabkey" bordertype="false" numberpattern="" readonlyscript="" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="readonly" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="" valuescript="var@nbsp;_pSaveAndNew@nbsp;=@nbsp;getSessionValue(@quot;_pSaveAndNew@quot;);&#9;//获取session值@amp;#10;@amp;#13;var@nbsp;_pSaveAndNewDocid@nbsp;=@nbsp;getSessionValue(@quot;_pSaveAndNewDocid@quot;);&#9;//获取session值@amp;#10;@amp;#13;var@nbsp;curDoc@nbsp;=@nbsp;getCurrentDocument();@amp;#10;@amp;#13;var@nbsp;docid@nbsp;=@nbsp;curDoc.getId();@amp;#10;@amp;#13;var@nbsp;_pNo@nbsp;=@nbsp;getItemValueAsString(@quot;_pNo@quot;);@amp;#10;@amp;#13;if((docid!=null@nbsp;@amp;@amp;@nbsp;!docid==(@quot;@quot;)@nbsp;@amp;@amp;@nbsp;_pSaveAndNew!=null@nbsp;@amp;@amp;@nbsp;_pSaveAndNewDocid!=null@amp;#10;@amp;#13;&#9;&#9;@amp;@amp;@nbsp;_pSaveAndNew==(_pNo)@nbsp;@amp;@amp;@nbsp;!_pSaveAndNewDocid==(docid))@nbsp;||@nbsp;(_pNo!=null@nbsp;@amp;@amp;@nbsp;_pNo==(@quot;@quot;))){@amp;#10;@amp;#13;&#9;countNext2(@#146;JH@#146;,true,true,true,3);@amp;#10;@amp;#13;}" /></td>
            <td class="td_label" width="120" abp="24665">计划类型</td>
            <td abp="24666"><select id="11e3-44f9-a2be1ac8-bf16-33864f4d4b3c" class="cn.myapps.runtime.dynaform.form.ejb.SelectField" abp="24667" fieldtype="VALUE_TYPE_VARCHAR" filtercondition="" discript="计划类型" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.SelectField" readonlyscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;true;@amp;#10;@amp;#13;if(stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草部门主任审核@quot;)@amp;#10;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;验收部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;)){@amp;#10;@amp;#13;&#9;rtn@nbsp;=@nbsp;false;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="text" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="true" calculateonrefresh="false" hiddenscript="" valuescript="" module="" optionseditmode="01" dialogview="" optionsvalue="" optionstext="" optionsscript="@quot;月度;年度@quot;;" name="_pType"></select></td>
        </tr>
        <tr abp="24668">
            <td class="td_label" width="120" abp="24669">计划级别</td>
            <td abp="24670"><select id="11e3-44fb-b5748841-bf16-33864f4d4b3c" class="cn.myapps.runtime.dynaform.form.ejb.SelectField" abp="24671" fieldtype="VALUE_TYPE_VARCHAR" filtercondition="" discript="计划级别" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.SelectField" readonlyscript="//&ldquo;计划级别&rdquo;只读脚本@amp;#10;@amp;#13;var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;_pType@nbsp;=@nbsp;getItemValue(@quot;_pType@quot;);@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;true;@amp;#10;@amp;#13;if((stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草部门主任审核@quot;)@amp;#10;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;验收部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;))@nbsp;@amp;@amp;@nbsp;_pType!=null@nbsp;@amp;@amp;@nbsp;!_pType==(@quot;年度@quot;)){@amp;#10;@amp;#13;&#9;rtn@nbsp;=@nbsp;false;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="text" validaterule="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;if(stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)){@amp;#10;@amp;#13;&#9;var@nbsp;_pLevel@nbsp;=@nbsp;getItemValue(@quot;_pLevel@quot;);@amp;#10;@amp;#13;&#9;if(_pLevel!=null@nbsp;@amp;@amp;@nbsp;_pLevel==(@quot;督办@quot;)){@amp;#10;@amp;#13;&#9;&#9;var@nbsp;webUser@nbsp;=@nbsp;getWebUser();@amp;#10;@amp;#13;&#9;&#9;var@nbsp;roles@nbsp;=@nbsp;webUser.getRoles();@amp;#10;@amp;#13;&#9;&#9;var@nbsp;rtn@nbsp;=@nbsp;false;@amp;#10;@amp;#13;&#9;&#9;for(var@nbsp;iter@nbsp;=@nbsp;roles.iterator();iter.hasNext();){@amp;#10;@amp;#13;&#9;&#9;&#9;var@nbsp;role@nbsp;=@nbsp;iter.next();@amp;#10;@amp;#13;&#9;&#9;&#9;var@nbsp;roleNo@nbsp;=@nbsp;role.getRoleNo();@amp;#10;@amp;#13;&#9;&#9;&#9;if(roleNo==1007@nbsp;||@nbsp;roleNo==1008@nbsp;||@nbsp;roleNo==1009@nbsp;||@nbsp;roleNo==1010){@amp;#10;@amp;#13;&#9;&#9;&#9;&#9;rtn@nbsp;=@nbsp;true;@amp;#10;@amp;#13;&#9;&#9;&#9;&#9;break;@amp;#10;@amp;#13;&#9;&#9;&#9;}@amp;#10;@amp;#13;&#9;&#9;}@amp;#10;@amp;#13;&#9;&#9;if(!rtn){@amp;#10;@amp;#13;&#9;&#9;&#9;var@nbsp;rtnStr@nbsp;=@nbsp;@quot;您没有权限新建督办级别的计划！@quot;;@amp;#10;@amp;#13;&#9;&#9;&#9;rtnStr;@amp;#10;@amp;#13;&#9;&#9;}@amp;#10;@amp;#13;&#9;}@amp;#10;@amp;#13;}" editmode="01" processdescription="[];[]" refreshonchanged="true" calculateonrefresh="true" hiddenscript="" valuescript="//计划级别值脚本@amp;#10;@amp;#13;var@nbsp;_pType@nbsp;=@nbsp;getItemValue(@quot;_pType@quot;);@amp;#10;@amp;#13;if(_pType!=null@nbsp;@amp;@amp;@nbsp;_pType==(@quot;年度@quot;)){@amp;#10;@amp;#13;&#9;var@nbsp;rtn@nbsp;=@nbsp;@quot;@quot;;@amp;#10;@amp;#13;&#9;rtn;@amp;#10;@amp;#13;}" module="" optionseditmode="01" dialogview="" optionsvalue="" optionstext="" optionsscript="//计划级别选项脚本@amp;#10;@amp;#13;var@nbsp;_pType@nbsp;=@nbsp;getItemValue(@quot;_pType@quot;);@amp;#10;@amp;#13;var@nbsp;opts@nbsp;=@nbsp;createOptions();//常规、重点、督办@amp;#10;@amp;#13;if(_pType!=null@nbsp;@amp;@amp;@nbsp;_pType==(@quot;年度@quot;)){@amp;#10;@amp;#13;&#9;opts.add(@#146;@#146;,@#146;@#146;);@amp;#10;@amp;#13;&#9;opts.add(@#146;常规@#146;,@#146;常规@#146;);@amp;#10;@amp;#13;&#9;opts.add(@#146;重点@#146;,@#146;重点@#146;);@amp;#10;@amp;#13;&#9;opts.add(@#146;督办@#146;,@#146;督办@#146;);@amp;#10;@amp;#13;}else@nbsp;{@amp;#10;@amp;#13;&#9;opts.add(@#146;常规@#146;,@#146;常规@#146;);@amp;#10;@amp;#13;&#9;opts.add(@#146;重点@#146;,@#146;重点@#146;);@amp;#10;@amp;#13;&#9;opts.add(@#146;督办@#146;,@#146;督办@#146;);@amp;#10;@amp;#13;}@amp;#10;@amp;#13;opts;" name="_pLevel"></select></td>
            <td class="td_label" width="120" abp="24672">专项计划</td>
            <td abp="24673"><input id="11e3-44fc-aeb56e77-bf16-33864f4d4b3c" class="cn.myapps.runtime.dynaform.form.ejb.CheckboxField" type="checkbox" value="on" name="_pSpecial" abp="24674" fieldtype="VALUE_TYPE_TEXT" filtercondition="" discript="专项计划" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.CheckboxField" readonlyscript="//&ldquo;专项计划&rdquo;只读脚本@amp;#10;@amp;#13;var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;_pType@nbsp;=@nbsp;getItemValue(@quot;_pType@quot;);@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;true;@amp;#10;@amp;#13;if((stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草部门主任审核@quot;)@amp;#10;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;验收部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;))@nbsp;@amp;@amp;@nbsp;_pType!=null@nbsp;@amp;@amp;@nbsp;!_pType==(@quot;年度@quot;)){@amp;#10;@amp;#13;&#9;rtn@nbsp;=@nbsp;false;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="text" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="true" hiddenscript="" valuescript="//专项计划值脚本@amp;#10;@amp;#13;var@nbsp;_pType@nbsp;=@nbsp;getItemValue(@quot;_pType@quot;);@amp;#10;@amp;#13;if(_pType!=null@nbsp;@amp;@amp;@nbsp;_pType==(@quot;年度@quot;)){@amp;#10;@amp;#13;&#9;var@nbsp;rtn@nbsp;=@nbsp;@quot;@quot;;@amp;#10;@amp;#13;&#9;rtn;@amp;#10;@amp;#13;}" module="" optionseditmode="01" dialogview="" optionsvalue="" optionstext="" optionsscript="@quot;是@quot;" layout="horizontal" /></td>
        </tr>
        <tr abp="24675">
            <td class="td_label" abp="24676"><span class="noEmpty" abp="24677">*</span>计划标题</td>
            <td colspan="3" abp="24678"><input id="11e3-3470-226d0b7a-9257-15373ee2b333" class="cn.myapps.runtime.dynaform.form.ejb.InputField" size="1" value="" name="_pTitle" abp="24679" fieldtype="VALUE_TYPE_VARCHAR" filtercondition="" discript="计划标题" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.InputField" text="text" fieldkeyevent="Tabkey" bordertype="false" numberpattern="" readonlyscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;true;@amp;#10;@amp;#13;if(stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草部门主任审核@quot;)@amp;#10;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;验收部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;)){@amp;#10;@amp;#13;&#9;rtn@nbsp;=@nbsp;false;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="core.dynaform.form.formfield.validate.checkEmpty_system" texttype="text" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="" valuescript="" style="height: 22px; width: 680px" /></td>
        </tr>
        <tr abp="24680">
            <td class="td_label" abp="24681">质量标准</td>
            <td colspan="3" abp="24682"><textarea id="11e3-3af6-8d27d374-8426-7b355eda1d73" class="cn.myapps.runtime.dynaform.form.ejb.TextareaField" rows="1" cols="22" abp="24683" fieldtype="VALUE_TYPE_TEXT" filtercondition="" discript="质量标准" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.TextareaField" bordertype="false" readonlyscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;true;@amp;#10;@amp;#13;if(stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;起草计划部门主任审核@quot;)@nbsp;@amp;#10;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;职能部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;)){@amp;#10;@amp;#13;&#9;rtn@nbsp;=@nbsp;false;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="" valuescript="" style="height: 42px; width: 680px" name="_pStandard"></textarea></td>
        </tr>
        <tr abp="24684">
            <td class="td_label" abp="24685">计划来源</td>
            <td colspan="3" abp="24686"><input id="11e3-3470-84f81887-9257-15373ee2b333" class="cn.myapps.runtime.dynaform.form.ejb.InputField" size="32" value="" name="_pSource" abp="24687" fieldtype="VALUE_TYPE_VARCHAR" filtercondition="" discript="计划来源" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.InputField" text="text" fieldkeyevent="Tabkey" bordertype="false" numberpattern="" readonlyscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;true;@amp;#10;@amp;#13;if(stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草部门主任审核@quot;)@amp;#10;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;验收部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;)){@amp;#10;@amp;#13;&#9;rtn@nbsp;=@nbsp;false;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="text" validaterule="var@nbsp;_pType@nbsp;=@nbsp;getItemValueAsString(@quot;_pType@quot;);@amp;#10;@amp;#13;var@nbsp;_pSource@nbsp;=@nbsp;getItemValueAsString(@quot;_pSource@quot;);@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;@quot;@quot;;@amp;#10;@amp;#13;if(_pType!=null@nbsp;@amp;@amp;@nbsp;_pType==(@quot;年度@quot;)@nbsp;@amp;@amp;@nbsp;_pSource!=null@nbsp;@amp;@amp;@nbsp;_pSource==(@quot;@quot;)){@amp;#10;@amp;#13;&#9;rtn@nbsp;=@nbsp;@quot;年度计划必须填写计划来源！@quot;;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="" valuescript="" style="height: 22px; width: 680px" />&nbsp;&nbsp;</td>
        </tr>
        <tr abp="24688">
            <td class="td_label" abp="24689"><span class="noEmpty" abp="24690">*</span>执行部门</td>
            <td abp="24691"><select id="11e3-422d-ed55c725-89f4-ffe2ceff1059" class="cn.myapps.runtime.dynaform.form.ejb.DepartmentField" abp="24692" type="text" fieldtype="VALUE_TYPE_VARCHAR" filtercondition="" discript="" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.DepartmentField" readonlyscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;true;@amp;#10;@amp;#13;if(stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草部门主任审核@quot;)@amp;#10;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;验收部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;)){@amp;#10;@amp;#13;&#9;rtn@nbsp;=@nbsp;false;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="core.dynaform.form.formfield.validate.checkEmpty_system" texttype="text" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="true" calculateonrefresh="false" hiddenscript="" valuescript="" limitbyuser="false" departmentlevel="1" relatedfield="" defaultoptiontype="16" allowempty="true" isdepartmentfield="isDepartmentField" style="width: 153px" name="_pDepartment"></select></td>
            <td class="td_label" abp="24693"><span class="noEmpty" abp="24694">*</span>完成时间</td>
            <td abp="24695"><input id="11e3-44fd-22ab8f40-bf16-33864f4d4b3c" class="cn.myapps.runtime.dynaform.form.ejb.DateField" value="" name="_pEndTime" abp="24696" fieldtype="VALUE_TYPE_DATE" filtercondition="" discript="完成时间" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.DateField" readonlyscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;true;@amp;#10;@amp;#13;if(stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;起草计划部门主任审核@quot;)@amp;#10;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;验收部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;)){@amp;#10;@amp;#13;&#9;rtn@nbsp;=@nbsp;false;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="text" validaterule="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;@quot;@quot;;@amp;#10;@amp;#13;if(stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)){@amp;#10;@amp;#13;&#9;var@nbsp;_pEndTime@nbsp;=@nbsp;getItemValueAsDate(@quot;_pEndTime@quot;);@amp;#10;@amp;#13;&#9;if(_pEndTime==null@nbsp;||@nbsp;_pEndTime==(@quot;@quot;)){@amp;#10;@amp;#13;&#9;&#9;rtn@nbsp;=@nbsp;@quot;完成时间不能为空!@quot;;@amp;#10;@amp;#13;&#9;}else{@amp;#10;@amp;#13;&#9;&#9;var@nbsp;curDate@nbsp;=@nbsp;getCurDate(@quot;yyyy-MM-dd@nbsp;HH:mm:ss@quot;);@amp;#10;@amp;#13;&#9;&#9;_pEndTime@nbsp;=@nbsp;format(_pEndTime,@quot;yyyy-MM-dd@nbsp;HH:mm:ss@quot;);&#9;//date--@gt;string@amp;#10;@amp;#13;&#9;&#9;var@nbsp;days@nbsp;=@nbsp;getWorkingDayCount(curDate,@nbsp;_pEndTime);&#9;//string--@gt;int@amp;#10;@amp;#13;&#9;&#9;if(days@lt;7){@amp;#10;@amp;#13;&#9;&#9;&#9;rtn@nbsp;=@nbsp;@quot;完成时间不能在7个工作天内！@quot;;@amp;#10;@amp;#13;&#9;&#9;}@amp;#10;@amp;#13;&#9;}@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="" valuescript="" limit="false" prev_name="" datepattern="YMD" /><span abp="24697" style="color: green">过了完成时间再提延期申请将多考核1次！</span></td>
        </tr>
        <tr abp="24698">
            <td class="td_label" abp="24699">负责单位(班组)</td>
            <td abp="24700"><select id="11e3-422e-fb1d0adf-89f4-ffe2ceff1059" class="cn.myapps.runtime.dynaform.form.ejb.DepartmentField" abp="24701" type="text" fieldtype="VALUE_TYPE_VARCHAR" filtercondition="" discript="负责单位(班组)" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.DepartmentField" readonlyscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;true;@amp;#10;@amp;#13;if(stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;起草计划部门主任审核@quot;)@nbsp;@amp;#10;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;验收部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划分配@quot;)){@amp;#10;@amp;#13;&#9;rtn@nbsp;=@nbsp;false;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="text" validaterule="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;@quot;@quot;;@amp;#10;@amp;#13;if(stateLabel!=null@nbsp;@amp;@amp;@nbsp;(stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划分配@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草部门主任审核@quot;)@amp;#10;@amp;#13;&#9;&#9;@nbsp;||@nbsp;stateLabel==(@quot;验收部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;))){@amp;#10;@amp;#13;&#9;var@nbsp;_p2Department@nbsp;=@nbsp;getItemValueAsString(@quot;_p2Department@quot;);@amp;#10;@amp;#13;&#9;var@nbsp;_pResponsible@nbsp;=@nbsp;getItemValueAsString(@quot;_pResponsible@quot;);@amp;#10;@amp;#13;&#9;if(_p2Department!=null@nbsp;@amp;@amp;@nbsp;_p2Department !=(@quot;@quot;)@nbsp;@amp;@amp;@nbsp;_pResponsible!=null@nbsp;@amp;@amp;@nbsp;_pResponsible !=(@quot;@quot;)){@amp;#10;@amp;#13;&#9;&#9;rtn@nbsp;=@nbsp;@quot;@#146;负责单位(班组)@#146;和@#146;负责人@#146;只能填一个！@quot;;@amp;#10;@amp;#13;&#9;}@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="true" hiddenscript="" valuescript="" isdepartmentfield="isDepartmentField" allowempty="true" defaultoptiontype="16" relatedfield="_pDepartment" departmentlevel="2" limitbyuser="false" style="width: 153px" name="_p2Department"></select><span abp="24702" style="color: green">负责单位和负责人只能填一个！</span></td>
            <td class="td_label" abp="24703">负责人</td>
            <td abp="24704"><select id="11e3-589a-057bbd8e-95bd-5ff35db4b26f" class="cn.myapps.runtime.dynaform.form.ejb.SelectField" abp="24705" fieldtype="VALUE_TYPE_VARCHAR" filtercondition="" discript="负责人" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.SelectField" module="" readonlyscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;true;@amp;#10;@amp;#13;if(stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;起草计划部门主任审核@quot;)@nbsp;@amp;#10;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;验收部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划分配@quot;)){@amp;#10;@amp;#13;&#9;rtn@nbsp;=@nbsp;false;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="text" validaterule="var@nbsp;_pDepartment@nbsp;=@nbsp;getItemValue(@quot;_pDepartment@quot;);@amp;#10;@amp;#13;if(isNotNull(_pDepartment)){@amp;#10;@amp;#13;&#9;var@nbsp;process@nbsp;=@nbsp;createProcess(@quot;cn.myapps.core.authtime.department.service.DepartmentProcess@quot;);//部门业务处理类@amp;#10;@amp;#13;&#9;var@nbsp;dept=process.doView(_pDepartment);//id为部门ID，获取部门对象@amp;#10;@amp;#13;&#9;if(dept!=null){@amp;#10;@amp;#13;&#9;&#9;var@nbsp;name=dept.getName();@amp;#10;@amp;#13;&#9;&#9;if(name!=null@nbsp;@amp;@amp;@nbsp;(name==(@quot;厂领导@quot;)@nbsp;||@nbsp;name==(@quot;副总师@quot;))){@amp;#10;@amp;#13;&#9;&#9;&#9;var@nbsp;_pResponsible@nbsp;=@nbsp;getItemValue(@quot;_pResponsible@quot;);@amp;#10;@amp;#13;&#9;&#9;&#9;if(_pResponsible!=null@nbsp;@amp;@amp;@nbsp;_pResponsible==(@quot;@quot;)){@amp;#10;@amp;#13;&#9;&#9;&#9;&#9;var@nbsp;rtn@nbsp;=@nbsp;@quot;@#146;执行部门@#146;是@#146;@quot;+name+@quot;@#146;时@#146;负责人@#146;不能为空！@quot;;@amp;#10;@amp;#13;&#9;&#9;&#9;&#9;rtn;@amp;#10;@amp;#13;&#9;&#9;&#9;}@amp;#10;@amp;#13;&#9;&#9;}@amp;#10;@amp;#13;&#9;}@amp;#10;@amp;#13;}" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="true" hiddenscript="" valuescript="" optionseditmode="01" dialogview="" optionsvalue="" optionstext="" optionsscript="//负责人选项脚本@amp;#10;@amp;#13;var@nbsp;_pDepartment@nbsp;=@nbsp;getItemValue(@quot;_pDepartment@quot;);@amp;#10;@amp;#13;var@nbsp;opts@nbsp;=@nbsp;createOptions();@amp;#10;@amp;#13;opts.add(@quot;@quot;,@quot;@quot;);@amp;#10;@amp;#13;if(isNotNull(_pDepartment)@nbsp;@amp;@amp;@nbsp;_pDepartment!=(@quot;@quot;)){@amp;#10;@amp;#13;&#9;var@nbsp;users@nbsp;=@nbsp;getUsersByDptId(_pDepartment);@amp;#10;@amp;#13;&#9;for(var@nbsp;iter1=users.iterator();iter1.hasNext();){@amp;#10;@amp;#13;&#9;@nbsp;@nbsp;@nbsp;@nbsp;var@nbsp;user=iter1.next();@amp;#10;@amp;#13;&#9;@nbsp;@nbsp;@nbsp;@nbsp;opts.add(user.getName(),user.getId());@amp;#10;@amp;#13;&#9;}@amp;#10;@amp;#13;&#9;//下级部门@amp;#10;@amp;#13;&#9;/**@amp;#10;@amp;#13;&#9;var@nbsp;process@nbsp;=@nbsp;createProcess(@quot;cn.myapps.core.authtime.department.service.DepartmentProcess@quot;);@amp;#10;@amp;#13;&#9;var@nbsp;depVos@nbsp;=@nbsp;process.getDatasByParent(_pDepartment);@amp;#10;@amp;#13;&#9;if(depVos!=null@nbsp;@amp;@amp;@nbsp;depVos.size()@gt;0){@amp;#10;@amp;#13;&#9;&#9;for(var@nbsp;iter1=depVos.iterator();iter1.hasNext();){@amp;#10;@amp;#13;&#9;&#9;@nbsp;@nbsp;@nbsp;@nbsp;var@nbsp;dept=iter1.next();@amp;#10;@amp;#13;&#9;&#9;@nbsp;@nbsp;@nbsp;@nbsp;var@nbsp;depId1=@nbsp;dept.getId();@amp;#10;@amp;#13;&#9;&#9;@nbsp;@nbsp;@nbsp;@nbsp;var@nbsp;users@nbsp;=@nbsp;getUsersByDptId(depId1);@amp;#10;@amp;#13;&#9;&#9;@nbsp;@nbsp;@nbsp;@nbsp;for(var@nbsp;iter2=users.iterator();iter2.hasNext();){@amp;#10;@amp;#13;&#9;&#9;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;var@nbsp;user=iter2.next();@amp;#10;@amp;#13;&#9;&#9;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;opts.add(user.getName(),user.getId());@amp;#10;@amp;#13;&#9;&#9;@nbsp;@nbsp;@nbsp;@nbsp;}@amp;#10;@amp;#13;&#9;&#9;}@amp;#10;@amp;#13;&#9;}@amp;#10;@amp;#13;&#9;**/@amp;#10;@amp;#13;}@amp;#10;@amp;#13;opts;" style="width: 155px" name="_pResponsible"></select></td>
        </tr>
        <tr abp="24706">
            <td class="td_label" abp="24707">配合单位(班组)</td>
            <td abp="24708"><span abp="24709" style="color: green"><select id="11e3-5897-fadfe5e5-95bd-5ff35db4b26f" abp="24710" type="text" fieldtype="VALUE_TYPE_TEXT" discript="配合单位(班组)" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.TreeDepartmentField" limit="15" readonlyscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;true;@amp;#10;@amp;#13;if(stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;起草计划部门主任审核@quot;)@nbsp;@amp;#10;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;验收部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划分配@quot;)){@amp;#10;@amp;#13;&#9;rtn@nbsp;=@nbsp;false;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="text" validaterule="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;@quot;@quot;;@amp;#10;@amp;#13;if(stateLabel@nbsp;==@nbsp;null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;@amp;#10;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草部门主任审核@quot;)@amp;#10;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;验收部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;)@amp;#10;@amp;#13;&#9;&#9;@nbsp;||@nbsp;stateLabel==(@quot;计划分配@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划执行@quot;)){@amp;#10;@amp;#13;&#9;var@nbsp;_pDepartment@nbsp;=@nbsp;getItemValueAsString(@quot;_pDepartment@quot;);@amp;#10;@amp;#13;&#9;var@nbsp;_pCooperateDept@nbsp;=@nbsp;getItemValueAsString(@quot;_pCooperateDept@quot;);@amp;#10;@amp;#13;&#9;var@nbsp;_pCooperateDepts@nbsp;=@nbsp;_pCooperateDept.split(@quot;;@quot;);@amp;#10;@amp;#13;&#9;var@nbsp;process@nbsp;=@nbsp;createProcess(@quot;cn.myapps.core.authtime.department.service.DepartmentProcess@quot;);//部门业务处理类@amp;#10;@amp;#13;&#9;var@nbsp;_pDepartmentObj@nbsp;=@nbsp;process.doView(_pDepartment);@amp;#10;@amp;#13;&#9;var@nbsp;_pDepartmentName@nbsp;=@nbsp;@quot;@quot;;@amp;#10;@amp;#13;&#9;if(_pDepartmentObj!=null){@amp;#10;@amp;#13;&#9;&#9;_pDepartmentName@nbsp;=@nbsp;_pDepartmentObj.getName();@amp;#10;@amp;#13;&#9;}@amp;#10;@amp;#13;&#9;var@nbsp;deptNames@nbsp;=@nbsp;@quot;@quot;;@amp;#10;@amp;#13;&#9;for@nbsp;(@nbsp;var@nbsp;i@nbsp;=@nbsp;0;@nbsp;i@nbsp;@lt;@nbsp;_pCooperateDepts.length;@nbsp;i++)@nbsp;{@amp;#10;@amp;#13;&#9;&#9;var@nbsp;_pCooperateDeptId@nbsp;=@nbsp;_pCooperateDepts[i];@amp;#10;@amp;#13;&#9;&#9;var@nbsp;dept=process.doView(_pCooperateDeptId);//id为部门ID，获取部门对象@amp;#10;@amp;#13;&#9;&#9;if(dept!=null){@amp;#10;@amp;#13;&#9;&#9;&#9;var@nbsp;deptSuper=dept.getSuperior();@amp;#10;@amp;#13;&#9;&#9;&#9;var@nbsp;deptSuperId@nbsp;=@nbsp;deptSuper.getId();@amp;#10;@amp;#13;&#9;&#9;&#9;if(deptSuperId!=null@nbsp;@amp;@amp;@nbsp;deptSuperId!=(_pDepartment)){@amp;#10;@amp;#13;&#9;&#9;&#9;&#9;deptNames@nbsp;+=@nbsp;@quot;@#146;@quot;+dept.getName()+@quot;@#146;,@quot;;@amp;#10;@amp;#13;&#9;&#9;&#9;}@amp;#10;@amp;#13;&#9;&#9;}@amp;#10;@amp;#13;&#9;}@amp;#10;@amp;#13;&#9;if(!deptNames==(@quot;@quot;)){@amp;#10;@amp;#13;&#9;&#9;rtn@nbsp;=@nbsp;deptNames+@quot;不是@#146;@quot;+_pDepartmentName+@quot;@#146;的下级部门，配合单位(班组)只能选择执行部门的下级部门！@quot;;@amp;#10;@amp;#13;&#9;}@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;@amp;#10;@amp;#13;" editmode="" refreshonchanged="false" calculateonrefresh="true" hiddenscript="" istreedepartmentfield="istreedepartmentfield" class="cn.myapps.runtime.dynaform.form.ejb.TreeDepartmentField" style="width: 153px" name="_pCooperateDept"></select>只能选择执行部门下的二级单位(班组)！</span></td>
            <td class="td_label" abp="24711">配合人</td>
            <td abp="24712"><select id="11e3-5898-09cc8b22-95bd-5ff35db4b26f" class="cn.myapps.runtime.dynaform.form.ejb.UserField" abp="24713" type="text" fieldtype="VALUE_TYPE_TEXT" filtercondition="" discript="配合人" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.UserField" readonlyscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;true;@amp;#10;@amp;#13;if(stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;起草计划部门主任审核@quot;)@nbsp;@amp;#10;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;验收部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划分配@quot;)){@amp;#10;@amp;#13;&#9;rtn@nbsp;=@nbsp;false;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="text" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="" valuescript="" limitbyuser="false" selectmode="multiSelect" limitsum="10" filterfield="" isuserfield="isUserField" style="width: 155px" name="_pCooperatePerson"></select><span abp="24714" style="color: green">只能选择执行部门内人员！</span></td>
        </tr>
        <tr abp="24715" name="_reason_hide">
            <td class="td_label" abp="24716">汇报时间</td>
            <td abp="24717"><input id="11e3-4232-7f5c255d-89f4-ffe2ceff1059" class="cn.myapps.runtime.dynaform.form.ejb.DateField" value="" name="_pReportTime" abp="24718" fieldtype="VALUE_TYPE_DATE" filtercondition="" discript="汇报时间" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.DateField" readonlyscript="" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="readonly" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;false;@amp;#10;@amp;#13;if(stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;起草计划部门主任审核@quot;)@nbsp;@amp;#10;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;职能部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划执行@quot;)){@amp;#10;@amp;#13;&#9;rtn@nbsp;=@nbsp;true;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" valuescript="" limit="false" prev_name="" datepattern="YMD" /></td>
            <td class="td_label" abp="24719">汇报次数</td>
            <td abp="24720"><input id="11e3-4b49-0388f646-9e60-2fb8180195a0" class="cn.myapps.runtime.dynaform.form.ejb.InputField" value="" name="_pReportCount" abp="24721" fieldtype="VALUE_TYPE_NUMBER" filtercondition="" discript="汇报次数" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.InputField" text="readonly" fieldkeyevent="Tabkey" bordertype="false" numberpattern="##" readonlyscript="" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="readonly" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;false;@amp;#10;@amp;#13;if(stateLabel@nbsp;==@nbsp;null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;起草计划部门主任审核@quot;)@nbsp;@amp;#10;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;职能部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划执行@quot;)){@amp;#10;@amp;#13;&#9;rtn@nbsp;=@nbsp;true;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" valuescript="" /></td>
        </tr>
        <tr abp="24722">
            <td class="td_label" abp="24723"><span class="noEmpty" abp="24724">*</span>验收部门</td>
            <td abp="24725"><span class="remind" abp="24726"><select id="11e3-4235-71b369d0-89f4-ffe2ceff1059" class="cn.myapps.runtime.dynaform.form.ejb.DepartmentField" abp="24727" type="text" fieldtype="VALUE_TYPE_VARCHAR" filtercondition="" discript="" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.DepartmentField" readonlyscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;true;@amp;#10;@amp;#13;if(stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;起草计划部门主任审核@quot;)@nbsp;@amp;#10;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;职能部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;)){@amp;#10;@amp;#13;&#9;rtn@nbsp;=@nbsp;false;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="text" validaterule="//验收部门检验脚本@amp;#10;@amp;#13;var@nbsp;_pLevel@nbsp;=@nbsp;getItemValueAsString(@quot;_pLevel@quot;);@amp;#10;@amp;#13;var@nbsp;_pDepartment@nbsp;=@nbsp;getItemValueAsString(@quot;_pDepartment@quot;);@amp;#10;@amp;#13;var@nbsp;_pCheckDepartment@nbsp;=@nbsp;getItemValueAsString(@quot;_pCheckDepartment@quot;);@amp;#10;@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;@quot;@quot;;@amp;#10;@amp;#13;if(_pCheckDepartment!=null@nbsp;@amp;@amp;@nbsp;_pCheckDepartment==(@quot;@quot;)){@amp;#10;@amp;#13;&#9;rtn@nbsp;+=@nbsp;@quot;@#146;验收部门@#146;不能为空！@quot;;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;if(_pLevel!=null@nbsp;@amp;@amp;@nbsp;!_pLevel==(@quot;常规@quot;)@nbsp;@amp;@amp;@nbsp;isNotNull(_pDepartment)@nbsp;@amp;@amp;@nbsp;_pCheckDepartment!=null@nbsp;@amp;@amp;@nbsp;_pDepartment==(_pCheckDepartment)){@amp;#10;@amp;#13;&#9;rtn@nbsp;+=@nbsp;@quot;@#146;验收部门@#146;不能和@#146;执行部门@#146;相同！@quot;;@amp;#10;@amp;#13;}@amp;#10;@amp;#13;rtn;" editmode="01" processdescription="[];[]" refreshonchanged="true" calculateonrefresh="true" hiddenscript="" valuescript="//验收部门值脚本@amp;#10;@amp;#13;var@nbsp;_pLevel@nbsp;=@nbsp;getItemValue(@quot;_pLevel@quot;);@amp;#10;@amp;#13;var@nbsp;_pCheckDepartment@nbsp;=@nbsp;getItemValue(@quot;_pCheckDepartment@quot;);@amp;#10;@amp;#13;if(_pCheckDepartment!=null@nbsp;@amp;@amp;@nbsp;_pCheckDepartment==(@quot;@quot;)@nbsp;@amp;@amp;@nbsp;_pLevel!=null@nbsp;@amp;@amp;@nbsp;_pLevel==(@quot;督办@quot;)){@amp;#10;@amp;#13;&#9;var@nbsp;depProcess@nbsp;=@nbsp;getDepartmentProcess();@amp;#10;@amp;#13;&#9;var@nbsp;depts@nbsp;=@nbsp;depProcess.getDepartmentByCode(@#146;003@#146;,getDomainid());@amp;#10;@amp;#13;&#9;var@nbsp;rtn@nbsp;=@nbsp;@quot;@quot;;@amp;#10;@amp;#13;&#9;for@nbsp;(var@nbsp;it@nbsp;=@nbsp;depts.iterator();@nbsp;it.hasNext();)@nbsp;{@amp;#10;@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;var@nbsp;department@nbsp;=@nbsp;it.next();@amp;#10;@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;rtn@nbsp;=@nbsp;department.getId();@amp;#10;@amp;#13;&#9;}@amp;#10;@amp;#13;&#9;rtn;@amp;#10;@amp;#13;}" limitbyuser="false" departmentlevel="1" relatedfield="" defaultoptiontype="16" allowempty="true" isdepartmentfield="isDepartmentField" style="width: 153px" name="_pCheckDepartment"></select>非常规计划时不能和执行部门相同！</span></td>
            <td class="td_label" abp="24728">验收人</td>
            <td abp="24729"><select id="11e3-589a-4beedd0f-95bd-5ff35db4b26f" class="cn.myapps.runtime.dynaform.form.ejb.SelectField" abp="24730" fieldtype="VALUE_TYPE_VARCHAR" filtercondition="" discript="验收人" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.SelectField" readonlyscript="//&ldquo;指定验收人&rdquo;节点只有当前用户是验收部门主任或副主任时才为false@amp;#13;var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#13;var@nbsp;webUser@nbsp;=@nbsp;getWebUser();@amp;#13;var@nbsp;depId@nbsp;=@nbsp;getItemValue(@quot;_pCheckDepartment@quot;);@amp;#13;//是否验收部门主任判断@amp;#13;var@nbsp;role1004@nbsp;=@nbsp;false;&#9;&#9;//当前登录用户是否验收部门主任@amp;#13;var@nbsp;roleName=getRoleByRoleNo(@quot;1004@quot;,getApplication());&#9;//1004是部门主任编号@amp;#13;var@nbsp;roleId@nbsp;=@nbsp;getRoleIdByName(roleName);@amp;#13;var@nbsp;users@nbsp;=@nbsp;getUsersByDptIdAndRoleId(depId,roleId);@amp;#13;for(var@nbsp;iter1=users.iterator();iter1.hasNext();){@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;var@nbsp;user=iter1.next();@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;if(user!=null@nbsp;@amp;@amp;@nbsp;webUser!=null@nbsp;@amp;@amp;@nbsp;webUser.getId()==(user.getId())){@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;&#9;role1004@nbsp;=@nbsp;true;@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;}@amp;#13;}@amp;#13;@amp;#13;var@nbsp;role1003@nbsp;=@nbsp;false;&#9;&#9;//当前登录用户是否验收部门副主任@amp;#13;if(!role1004){@amp;#13;&#9;//是否验收部门副主任判断@amp;#13;&#9;var@nbsp;roleName=getRoleByRoleNo(@quot;1003@quot;,getApplication());&#9;//1003是部门副主任编号@amp;#13;&#9;var@nbsp;roleId@nbsp;=@nbsp;getRoleIdByName(roleName);@amp;#13;&#9;var@nbsp;users@nbsp;=@nbsp;getUsersByDptIdAndRoleId(depId,roleId);@amp;#13;&#9;for(var@nbsp;iter1=users.iterator();iter1.hasNext();){@amp;#13;&#9;@nbsp;@nbsp;@nbsp;@nbsp;var@nbsp;user=iter1.next();@amp;#13;&#9;@nbsp;@nbsp;@nbsp;@nbsp;if(user!=null@nbsp;@amp;@amp;@nbsp;webUser!=null@nbsp;@amp;@amp;@nbsp;webUser.getId()==(user.getId())){@amp;#13;&#9;@nbsp;@nbsp;@nbsp;@nbsp;&#9;role1003@nbsp;=@nbsp;true;@amp;#13;&#9;@nbsp;@nbsp;@nbsp;@nbsp;}@amp;#13;&#9;}@amp;#13;}@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;true;@amp;#13;if((stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;起草计划部门主任审核@quot;)@nbsp;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;验收部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;))@nbsp;||@nbsp;(stateLabel@nbsp;==@nbsp;@quot;计划执行@quot;@nbsp;@amp;@amp;@nbsp;(role1004@nbsp;||@nbsp;role1003))){@amp;#13;&#9;rtn@nbsp;=@nbsp;false;@amp;#13;}@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="text" validaterule="var@nbsp;_pDepartment@nbsp;=@nbsp;getItemValue(@quot;_pCheckDepartment@quot;);@amp;#13;if(isNotNull(_pDepartment)){@amp;#13;&#9;var@nbsp;process@nbsp;=@nbsp;createProcess(@quot;cn.myapps.core.authtime.department.service.DepartmentProcess@quot;);//部门业务处理类@amp;#13;&#9;var@nbsp;dept=process.doView(_pDepartment);//id为部门ID，获取部门对象@amp;#13;&#9;if(dept!=null){@amp;#13;&#9;&#9;var@nbsp;name=dept.getName();@amp;#13;&#9;&#9;if(name!=null@nbsp;@amp;@amp;@nbsp;(name==(@quot;厂领导@quot;)@nbsp;||@nbsp;name==(@quot;副总师@quot;))){@amp;#13;&#9;&#9;&#9;var@nbsp;_pChecker@nbsp;=@nbsp;getItemValue(@quot;_pChecker@quot;);@amp;#13;&#9;&#9;&#9;if(_pChecker!=null@nbsp;@amp;@amp;@nbsp;_pChecker==(@quot;@quot;)){@amp;#13;&#9;&#9;&#9;&#9;var@nbsp;rtn@nbsp;=@nbsp;@quot;@#146;验收部门@#146;是@#146;@quot;+name+@quot;@#146;时@#146;验收人@#146;不能为空！@quot;;@amp;#13;&#9;&#9;&#9;&#9;rtn;@amp;#13;&#9;&#9;&#9;}@amp;#13;&#9;&#9;}@amp;#13;&#9;}@amp;#13;}" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="true" hiddenscript="" valuescript="" module="" optionseditmode="01" dialogview="" optionsvalue="" optionstext="" optionsscript="var@nbsp;_pDepartment@nbsp;=@nbsp;getItemValue(@quot;_pCheckDepartment@quot;);@amp;#13;var@nbsp;opts@nbsp;=@nbsp;createOptions();@amp;#13;opts.add(@quot;@quot;,@quot;@quot;);@amp;#13;if(isNotNull(_pDepartment)@nbsp;@amp;@amp;@nbsp;_pDepartment!=(@quot;@quot;)){@amp;#13;&#9;var@nbsp;users@nbsp;=@nbsp;getUsersByDptId(_pDepartment);@amp;#13;&#9;for(var@nbsp;iter1=users.iterator();iter1.hasNext();){@amp;#13;&#9;@nbsp;@nbsp;@nbsp;@nbsp;var@nbsp;user=iter1.next();@amp;#13;&#9;@nbsp;@nbsp;@nbsp;@nbsp;opts.add(user.getName(),user.getId());@amp;#13;&#9;}@amp;#13;&#9;//下级部门@amp;#13;&#9;var@nbsp;process@nbsp;=@nbsp;createProcess(@quot;cn.myapps.core.authtime.department.service.DepartmentProcess@quot;);@amp;#13;&#9;var@nbsp;depVos@nbsp;=@nbsp;process.getDatasByParent(_pDepartment);@amp;#13;&#9;if(depVos!=null@nbsp;@amp;@amp;@nbsp;depVos.size()@gt;0){@amp;#13;&#9;&#9;for(var@nbsp;iter1=depVos.iterator();iter1.hasNext();){@amp;#13;&#9;&#9;@nbsp;@nbsp;@nbsp;@nbsp;var@nbsp;dept=iter1.next();@amp;#13;&#9;&#9;@nbsp;@nbsp;@nbsp;@nbsp;var@nbsp;depId1=@nbsp;dept.getId();@amp;#13;&#9;&#9;@nbsp;@nbsp;@nbsp;@nbsp;var@nbsp;users@nbsp;=@nbsp;getUsersByDptId(depId1);@amp;#13;&#9;&#9;@nbsp;@nbsp;@nbsp;@nbsp;for(var@nbsp;iter2=users.iterator();iter2.hasNext();){@amp;#13;&#9;&#9;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;var@nbsp;user=iter2.next();@amp;#13;&#9;&#9;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;@nbsp;opts.add(user.getName(),user.getId());@amp;#13;&#9;&#9;@nbsp;@nbsp;@nbsp;@nbsp;}@amp;#13;&#9;&#9;}@amp;#13;&#9;}@amp;#13;}@amp;#13;opts;" style="width: 155px" name="_pChecker" layout="horizontal" readonlyshowvalonly="true" showlog="true" hidetype="parent" ishidetype="false" isdefaultvalue="false" instantvalidate="false" multiselect="false" clearable="false" multipledisplaymode="full" width="" widthunit="px" refreshmode="0" refreshfields="" attributeid="undefined"></select></td>
        </tr>
        <tr abp="24731" style="display: none">
            <td class="td_label" abp="24732">最后考核时间</td>
            <td abp="24733"><input id="11e3-4236-87103424-89f4-ffe2ceff1059" class="cn.myapps.runtime.dynaform.form.ejb.DateField" value="" name="_pLastCheckTime" abp="24734" fieldtype="VALUE_TYPE_DATE" filtercondition="" discript="最后考核时间" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.DateField" readonlyscript="" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="text" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="" valuescript="" limit="false" prev_name="" datepattern="YMD" /><img id="11e3-423a-bbbd7982-89f4-ffe2ceff1059" class="cn.myapps.runtime.dynaform.form.ejb.CalctextField" src="http://localhost:8080/obpm/core/dynaform/form/webeditor/editor/plugins/calctextfield/calctextfield.gif" abp="24735" classname="cn.myapps.runtime.dynaform.form.ejb.CalctextField" calculateonrefresh="true" valuescript="#include@nbsp;@quot;表单函数@quot;;@amp;#10;@amp;#13;thisStateLabel();" name="QZbf508d3b3" /></td>
            <td class="td_label" abp="24736">已延期</td>
            <td abp="24737"><input id="11e3-4687-b20a1040-8183-e7f4dcdf2bee" class="cn.myapps.runtime.dynaform.form.ejb.CheckboxField" type="checkbox" value="on" name="_isDefer" abp="24738" fieldtype="VALUE_TYPE_TEXT" filtercondition="" discript="已延期" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.CheckboxField" readonlyscript="" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="text" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="" valuescript="" module="" optionseditmode="01" dialogview="" optionsvalue="" optionstext="" optionsscript="@quot;是@quot;" layout="horizontal" /></td>
        </tr>
        <tr abp="24739" style="display: none">
            <td class="td_label" abp="24740">厂领导审批人</td>
            <td abp="24741"><select id="11e3-5244-b9a09757-8a15-dbec6c028713" class="cn.myapps.runtime.dynaform.form.ejb.UserField" abp="24742" type="text" fieldtype="VALUE_TYPE_TEXT" filtercondition="" discript="厂领导审批人" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.UserField" readonlyscript="" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="text" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="" valuescript="" limitbyuser="false" selectmode="selectOne" limitsum="10" filterfield="" isuserfield="isUserField" name="_pFactoryLeader"></select></td>
            <td class="td_label" abp="24743">已取消</td>
            <td abp="24744"><input id="11e3-4687-c0118697-8183-e7f4dcdf2bee" class="cn.myapps.runtime.dynaform.form.ejb.CheckboxField" type="checkbox" value="on" name="_isCancel" abp="24745" fieldtype="VALUE_TYPE_TEXT" filtercondition="" discript="已取消" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.CheckboxField" readonlyscript="" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="text" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="" valuescript="" module="" optionseditmode="01" dialogview="" optionsvalue="" optionstext="" optionsscript="@quot;是@quot;" layout="horizontal" /></td>
        </tr>
        <tr abp="24746" style="display: none">
            <td class="td_label" abp="24747">申请延期的时间</td>
            <td abp="24748"><input id="11e3-c534-e5360276-821e-0b7b9f7433e4" class="cn.myapps.runtime.dynaform.form.ejb.DateField" value="" name="_pApplyDeferTime" abp="24749" fieldtype="VALUE_TYPE_DATE" filtercondition="" discript="申请延期的时间" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.DateField" limit="false" readonlyscript="" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="text" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="" valuescript="" prev_name="" datepattern="YMD" /></td>
            <td class="td_label" abp="24750">&nbsp;</td>
            <td abp="24751">&nbsp;</td>
        </tr>
        <tr abp="24752" name="_reason_hide">
            <td class="td_label" abp="24753">延期时间</td>
            <td abp="24754"><input id="11e3-57e9-e64dc634-b377-abf0fdc101d3" class="cn.myapps.runtime.dynaform.form.ejb.DateField" value="" name="_pDeferTime" abp="24755" fieldtype="VALUE_TYPE_DATE" filtercondition="" discript="延期时间" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.DateField" readonlyscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#13;var@nbsp;webUser@nbsp;=@nbsp;getWebUser();@amp;#13;var@nbsp;isRight@nbsp;=@nbsp;false;&#9;&#9;//当前登录用户是否验收部门主任@amp;#13;var@nbsp;depId@nbsp;=@nbsp;getItemValue(@quot;_pCheckDepartment@quot;);@amp;#13;var@nbsp;roleName=getRoleByRoleNo(@quot;1004@quot;,getApplication());&#9;//1004是部门主任编号@amp;#13;var@nbsp;roleId@nbsp;=@nbsp;getRoleIdByName(roleName);@amp;#13;var@nbsp;users@nbsp;=@nbsp;getUsersByDptIdAndRoleId(depId,roleId);@amp;#13;for(var@nbsp;iter1=users.iterator();iter1.hasNext();){@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;var@nbsp;user=iter1.next();@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;if(user!=null@nbsp;@amp;@amp;@nbsp;webUser!=null@nbsp;@amp;@amp;@nbsp;webUser.getId()==(user.getId())){@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;&#9;isRight@nbsp;=@nbsp;true;@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;}@amp;#13;}@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;true;@amp;#13;if(stateLabel!=null@nbsp;@amp;@amp;@nbsp;((stateLabel==(@quot;计划执行@quot;)@nbsp;@amp;@amp;@nbsp;!isRight)@nbsp;||@nbsp;stateLabel==(@quot;执行部门主任延期审核@quot;)@amp;#13;&#9;&#9;@nbsp;||@nbsp;stateLabel==(@quot;验收人延期审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;验收部门主任延期审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导延期审批@quot;))){@amp;#13;&#9;rtn@nbsp;=@nbsp;false;@amp;#13;}@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="text" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="" valuescript="" limit="true" prev_name="_pEndTime" datepattern="YMD" type="text" width="" widthunit="px" readonlyshowvalonly="true" showlog="true" isdefaultvalue="false" hidetype="parent" ishidetype="false" instantvalidate="false" refreshmode="0" refreshfields="" attributeid="undefined" /><span abp="24756" style="color: green">成功申请1次以上延期将考核！</span></td>
            <td class="td_label" abp="24757">延期次数</td>
            <td abp="24758"><input id="11e3-6180-3ef553d5-a9b8-1df6844d9f48" class="cn.myapps.runtime.dynaform.form.ejb.InputField" value="" name="_pDeferCount" abp="24759" fieldtype="VALUE_TYPE_NUMBER" filtercondition="" discript="延期次数" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.InputField" text="readonly" fieldkeyevent="Tabkey" bordertype="false" numberpattern="##" readonlyscript="" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" texttype="readonly" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="" valuescript="" /></td>
        </tr>
        <tr abp="24760" name="_reason_hide">
            <td class="td_label" abp="24761"><span abp="24762">延期理由</span></td>
            <td colspan="3" abp="24763"><textarea id="11e3-4237-546cfc94-89f4-ffe2ceff1059" class="cn.myapps.runtime.dynaform.form.ejb.TextareaField" cols="25" abp="24764" fieldtype="VALUE_TYPE_TEXT" filtercondition="" discript="延期理由" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.TextareaField" bordertype="false" readonlyscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#13;var@nbsp;webUser@nbsp;=@nbsp;getWebUser();@amp;#13;var@nbsp;isRight@nbsp;=@nbsp;false;&#9;&#9;//当前登录用户是否验收部门主任@amp;#13;var@nbsp;depId@nbsp;=@nbsp;getItemValue(@quot;_pCheckDepartment@quot;);@amp;#13;var@nbsp;roleName=getRoleByRoleNo(@quot;1004@quot;,getApplication());&#9;//1004是部门主任编号@amp;#13;var@nbsp;roleId@nbsp;=@nbsp;getRoleIdByName(roleName);@amp;#13;var@nbsp;users@nbsp;=@nbsp;getUsersByDptIdAndRoleId(depId,roleId);@amp;#13;for(var@nbsp;iter1=users.iterator();iter1.hasNext();){@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;var@nbsp;user=iter1.next();@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;if(user!=null@nbsp;@amp;@amp;@nbsp;webUser!=null@nbsp;@amp;@amp;@nbsp;webUser.getId()==(user.getId())){@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;&#9;isRight@nbsp;=@nbsp;true;@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;}@amp;#13;}@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;true;@amp;#13;if(stateLabel!=null@nbsp;@amp;@amp;@nbsp;((stateLabel==(@quot;计划执行@quot;)@nbsp;@amp;@amp;@nbsp;!isRight)@nbsp;||@nbsp;stateLabel==(@quot;执行部门主任延期审核@quot;))){@amp;#13;&#9;rtn@nbsp;=@nbsp;false;@amp;#13;}@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;false;@amp;#13;if(stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;起草计划部门主任审核@quot;)@nbsp;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;职能部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;)){@amp;#13;&#9;rtn@nbsp;=@nbsp;true;@amp;#13;}@amp;#13;rtn;" valuescript="" style="height: 36px; width: 680px" name="_pDeferReason" texttype="text" readonlyshowvalonly="true" showlog="true" hidetype="parent" ishidetype="false" worklimitchecked="false" isdefaultvalue="false" instantvalidate="false" width="" widthunit="px" refreshmode="0" refreshfields="" textareaheight="" textareamaxlimit="" attributeid="undefined"></textarea></td>
        </tr>
        <tr abp="24765" name="_reason_hide">
            <td class="td_label" abp="24766"><span abp="24767">取消理由</span></td>
            <td colspan="3" abp="24768"><textarea id="11e3-4237-685a272a-89f4-ffe2ceff1059" class="cn.myapps.runtime.dynaform.form.ejb.TextareaField" cols="13" abp="24769" fieldtype="VALUE_TYPE_TEXT" filtercondition="" discript="取消理由" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.TextareaField" bordertype="false" readonlyscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#13;var@nbsp;webUser@nbsp;=@nbsp;getWebUser();@amp;#13;var@nbsp;isRight@nbsp;=@nbsp;false;&#9;&#9;//当前登录用户是否验收部门主任@amp;#13;var@nbsp;depId@nbsp;=@nbsp;getItemValue(@quot;_pCheckDepartment@quot;);@amp;#13;var@nbsp;roleName=getRoleByRoleNo(@quot;1004@quot;,getApplication());&#9;//1004是部门主任编号@amp;#13;var@nbsp;roleId@nbsp;=@nbsp;getRoleIdByName(roleName);@amp;#13;var@nbsp;users@nbsp;=@nbsp;getUsersByDptIdAndRoleId(depId,roleId);@amp;#13;for(var@nbsp;iter1=users.iterator();iter1.hasNext();){@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;var@nbsp;user=iter1.next();@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;if(user!=null@nbsp;@amp;@amp;@nbsp;webUser!=null@nbsp;@amp;@amp;@nbsp;webUser.getId()==(user.getId())){@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;&#9;isRight@nbsp;=@nbsp;true;@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;}@amp;#13;}@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;true;@amp;#13;if(stateLabel!=null@nbsp;@amp;@amp;@nbsp;((stateLabel==(@quot;计划执行@quot;)@nbsp;@amp;@amp;@nbsp;!isRight)@nbsp;||@nbsp;stateLabel==(@quot;执行部门主任取消审核@quot;))){@amp;#13;&#9;rtn@nbsp;=@nbsp;false;@amp;#13;}@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="var@nbsp;stateLabel@nbsp;=@nbsp;getStateLabel();@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;false;@amp;#13;if(stateLabel==null@nbsp;||@nbsp;stateLabel==(@quot;@quot;)@nbsp;||@nbsp;stateLabel==(@quot;计划起草@quot;)@nbsp;||@nbsp;stateLabel==(@quot;起草计划部门主任审核@quot;)@nbsp;@amp;#13;&#9;&#9;||@nbsp;stateLabel==(@quot;职能部门主任审核@quot;)@nbsp;||@nbsp;stateLabel==(@quot;厂领导审批@quot;)){@amp;#13;&#9;rtn@nbsp;=@nbsp;true;@amp;#13;}@amp;#13;rtn;" valuescript="" style="height: 36px; width: 680px" name="_pCancelReason" texttype="text" readonlyshowvalonly="true" showlog="true" hidetype="parent" ishidetype="false" worklimitchecked="false" isdefaultvalue="false" instantvalidate="false" width="" widthunit="px" refreshmode="0" refreshfields="" textareaheight="" textareamaxlimit="" attributeid="undefined"></textarea></td>
        </tr>
        <tr abp="24770">
            <td class="td_label" abp="24771">计划备注</td>
            <td colspan="3" abp="24772"><textarea id="11e3-4237-76c0ad50-89f4-ffe2ceff1059" class="cn.myapps.runtime.dynaform.form.ejb.TextareaField" cols="24" abp="24773" fieldtype="VALUE_TYPE_TEXT" filtercondition="" discript="计划备注" mobile="true" classname="cn.myapps.runtime.dynaform.form.ejb.TextareaField" bordertype="false" readonlyscript="//流程状态为&ldquo;计划执行&rdquo;，当前登录用户是验收部门主任时@amp;#13;var@nbsp;webUser@nbsp;=@nbsp;getWebUser();@amp;#13;var@nbsp;isRight@nbsp;=@nbsp;false;&#9;&#9;//当前登录用户是否验收部门主任@amp;#13;var@nbsp;depId@nbsp;=@nbsp;getItemValue(@quot;_pCheckDepartment@quot;);@amp;#13;var@nbsp;roleName=getRoleByRoleNo(@quot;1004@quot;,getApplication());&#9;//1004是部门主任编号@amp;#13;var@nbsp;roleId@nbsp;=@nbsp;getRoleIdByName(roleName);@amp;#13;var@nbsp;users@nbsp;=@nbsp;getUsersByDptIdAndRoleId(depId,roleId);@amp;#13;for(var@nbsp;iter1=users.iterator();iter1.hasNext();){@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;var@nbsp;user=iter1.next();@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;if(user!=null@nbsp;@amp;@amp;@nbsp;webUser!=null@nbsp;@amp;@amp;@nbsp;webUser.getId()==(user.getId())){@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;&#9;isRight@nbsp;=@nbsp;true;@amp;#13;@nbsp;@nbsp;@nbsp;@nbsp;}@amp;#13;}@amp;#13;var@nbsp;rtn@nbsp;=@nbsp;false;@amp;#13;if(isRight@nbsp;@amp;@amp;@nbsp;stateLabel!=null@nbsp;@amp;@amp;@nbsp;stateLabel==(@quot;计划执行@quot;)){@amp;#13;&#9;rtn@nbsp;=@nbsp;true;@amp;#13;}@amp;#13;rtn;" printhiddenvalue="" hiddenvalue="" hiddenprintscript="" validatelibs="" validaterule="" editmode="01" processdescription="[];[]" refreshonchanged="false" calculateonrefresh="false" hiddenscript="" valuescript="" style="height: 36px; width: 680px" name="_pRemark" texttype="text" readonlyshowvalonly="true" showlog="true" hidetype="parent" ishidetype="false" worklimitchecked="false" isdefaultvalue="false" instantvalidate="false" width="" widthunit="px" refreshmode="0" refreshfields="" textareaheight="" textareamaxlimit="" attributeid="undefined"></textarea></td>
        </tr>
    </tbody>
</table>
</p>
<p abp="24774">
<table id="approval_history" class="form_table" cellspacing="1" cellpadding="1" width="100%" align="center" border="0" abp="24775">
    <tbody abp="24776">
        <tr abp="24777">
            <td class="td_title1" abp="24778">&nbsp;审批历史：</td>
        </tr>
        <tr abp="24779">
            <td class="td_label" abp="24780">&nbsp;<img id="11e3-13a0-3baaa1d2-954a-1b879b4b7440" class="cn.myapps.runtime.dynaform.form.ejb.CalctextField" src="http://58.58.176.243:3666/obpm/core/dynaform/form/webeditor/editor/plugins/calctextfield/calctextfield.gif" abp="24781" classname="cn.myapps.runtime.dynaform.form.ejb.CalctextField" calculateonrefresh="true" valuescript="#include@nbsp;@quot;表单函数@quot;;@amp;#10;@amp;#13;testhis();" name="QZ6a7bfffde" /></td>
        </tr>
    </tbody>
</table>
</p>
<p abp="24782"><script>
function hideEle(objName){
	jQuery("[name="+objName+"]").css("display","none");
}

jQuery(document).ready(function(){
	var stateLabel = jQuery("#stateLabel").val();
	if(stateLabel == "null" || stateLabel == "" || stateLabel == "计划起草" || stateLabel == "计划起草部门主任审核"
		|| stateLabel == "验收部门主任审核" || stateLabel == "厂领导审批"){//汇报时间、延期理由、取消理由
		hideEle("_reason_hide");
	}
});
</script></p>]]></templatecontext>
  <type>1</type>
  <styleId>11e9-7a26-62f43cbf-9820-539e9af1e136</styleId>
  <showLog>false</showLog>
  <showLogType>default</showLogType>
  <openComment>false</openComment>
  <commentTitleScript><![CDATA[]]></commentTitleScript>
  <commentFlagScript><![CDATA[]]></commentFlagScript>
  <commentHiddenScrtipt><![CDATA[]]></commentHiddenScrtipt>
  <commentExecuteScript><![CDATA[]]></commentExecuteScript>
  <recordMode>every</recordMode>
  <recordModeScript><![CDATA[]]></recordModeScript>
  <showType>old</showType>
  <showWaterMark>false</showWaterMark>
  <waterMarkScript></waterMarkScript>
  <version>1</version>
  <isopenablescript><![CDATA[]]></isopenablescript>
  <iseditablescript><![CDATA[]]></iseditablescript>
  <mappingStr><![CDATA[{"formName":"test","tableName":"","columnMappings":[]}]]></mappingStr>
  <orderno>0</orderno>
  <permissionType>private</permissionType>
  <layoutType>horizontal</layoutType>
</form>